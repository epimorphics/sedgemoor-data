  name         : impact
  description  : Template for translating impacts to RDF

  type:  Composite
  bind: 
    $base: http://data.sedgemoor.gov.uk/id/
  
  prefixes: 
    rdf        : http://www.w3.org/1999/02/22-rdf-syntax-ns#
    rdfs       : http://www.w3.org/2000/01/rdf-schema#
    owl        : http://www.w3.org/2002/07/owl#
    dcterms    : http://purl.org/dc/terms/
    geo-sparql : http://www.opengis.net/def/geosparql/
    geo        : http://www.w3.org/2003/01/geo/wgs84_pos#
    xsd        : http://www.w3.org/2001/XMLSchema#
    impact     : http://data.sedgemoor.gov.uk/def/impact/
    project    : http://data.sedgemoor.gov.uk/def/project/
    wdrs       : http://www.w3.org/2007/05/powder-s#
    version    : http://data.sedgemoor.gov.uk/def/version/
    
  templates : 
   - name                       : current_version
     "@id"                      : <{{ if (version == null) { return "" ; } else { return null } }}{$base}impact/{identifier}>
     <rdf:type>                 : <impact:PredictedImpact>
     <rdfs:label>               : "{name}@en"
     <dcterms:description>      : "{description}@en"
     <impact:impactOf>          : <{$base}project/{impact_of}>
     <impact:impactOn>          : <{$base}community/{impact_on}>
     ^<impact:impactedBy>       : <{$base}community/{impact_on}>
     <impact:category>          : <impact:impact-category/{impact_category}>
     <wdrs:describedBy>         : |
       <{ { 
         if ( reference_uri != null) {
           if (internal_reference == null) {
             return reference_uri.asString() ;
           } else {
             return $row.bnode ;
           }
         }
       } }>
   - name                       : version
     "@id"                      : <{$base}impact/{identifier}/ver/{version}>
     <dcterms:isVersionOf>      : <{$base}impact/{identifier}>
     ^<dcterms:hasVersion>      : <{$base}impact/{identifier}>
     <rdf:type>                 : 
                                  - <impact:PredictedImpact> 
                                  - <version:Version>
     <version:identifier>       : "{ { version.asString()} }"
     <rdfs:label>               : "{name}@en"
     <dcterms:description>      : "{description}@en"
     <impact:impactOf>          : <{$base}project/{impact_of}>
     <impact:impactOn>          : <{$base}community/{impact_on}>
     ^<impact:impactedBy>       : <{$base}community/{impact_on}>
     <impact:category>          : <impact:impact-category/{impact_category}>
     <wdrs:describedBy>         : <{ $row.bnode }>
     
   - name                       : reference
     "@id"                      : |
       <{ {
         if (internal_reference != null) {
           return $row.bnode ;
         } else {
           return null
         }
       } }>
     <dcterms:isPartOf>         : <{reference_uri}>
     <dcterms:identifier>       : "{internal_reference}"
     
     
     
     
     

